<?xml version='1.0' encoding='ISO-8859-1' ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets">
      <f:view contentType="text/html; charset=ISO-8859-1">  
		    <h:head>
		    	<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
		    
		        <!--Css globales-->        
		        <h:outputStylesheet name="default.css" library="css"/>
		        <h:outputStylesheet name="cssLayout.css" library="css"/>
		        <h:outputStylesheet name="cssJuan.css" library="universales/css"/>
		        <h:outputStylesheet name="botones.css" library="universales/css"/>
		        <h:outputStylesheet name="tablas.css" library="universales/css"/>
		        <h:outputStylesheet name="letras.css" library="universales/css"/>
		        <h:outputStylesheet name="fieldset.css" library="universales/css"/>
		
		        <h:outputScript name="hoverIntent.js" library="menuPrincipal/js"/>
		        <h:outputScript name="superfish.js" library="menuPrincipal/js"/>
		        <h:outputStylesheet name="superfish.css" library="menuPrincipal/css"/>        
		
		        <h:outputScript library="js" name="calendar_es.js" />
		
		
		
		
		        <!--Css locales-->        
		        <link href="css/tareasProfesores.css" rel="stylesheet" type="text/css" />
		
		        <!--Js globales-->
		
		        <h:outputScript name="validaciones.js" library="universales/js"/>
		
		        <!--Js locales-->
		        <script type="text/javascript"  src="js/tareasProfesores.js"/>
		
		
		        <title>Tareas</title>
		
		    </h:head>
		
		    <h:body>
		        <h:form>
		            <div style="width: auto;" >
		                <ui:include src="/resources/menuPrincipal/xhtml/superfish.xhtml"/>
		            </div>
		        </h:form>
		
		        <br/>
		
		
		        <fieldset class="fieldSetUniversal" style="width: 97%;  margin-left: auto; margin-right: auto;">
		            <div class="divTablaHeader" style="width: 100%; border-spacing: 2px; ">
		                <table width="100%" cellpadding="0" cellspacing="0" class="border2">
		                    <thead>
		                        <tr style="height: 30px;">
		                            <th class="colTablaNotasPrincipal-1 bordesHeader">
		                                Curso
		                            </th>
		                            <th class="colTablaNotasPrincipal-2 bordesHeader">
		                                Asignatura
		                            </th>
		                            <th class="colTablaNotasPrincipal-4 bordesHeader">
		
		                            </th>
		                            <th class="colTablaNotasPrincipal-3">
		                                <table width="100%" cellpadding="0" cellspacing="0">
		                                    <tr>
		                                        <td class="colTablasNostaTareas-1 ubicacionCeldaMitad bordesHeader">
		                                            Nombre
		                                        </td>
		                                        <td class="colTablasNostaTareas-2 ubicacionCeldaMitad bordesHeader">
		                                            Descripción
		                                        </td>
		                                        <td class="colTablasNostaTareas-3 ubicacionCeldaMitad bordesHeader">
		                                            Fecha
		                                        </td>
		                                        <td class="colTablasNostaTareas-4 ubicacionCeldaMitad">
		                                            &nbsp;
		                                        </td>
		                                    </tr>
		                                </table>
		                            </th>
		                        </tr>
		                    </thead>
		                </table>
		            </div>
		            <table width="100%" cellpadding="0" cellspacing="0" border="0" class="border2">
		                <tbody style="width: 100%">
		                    <tr>
		
		                        <td class="colTablaNotasPrincipal-1 bordesHeader">
		                            <h:form style="width: 100%;">
		                                <h:panelGroup id="contenedorCursos">
		                                    <h:dataTable id="tablaCursos" value="#{tareasProfesores.dataListCursos}" var="cursos" width="100%" cellpadding="0" cellspacing="0" border="0"
		                                                 columnClasses="colCursos-1" styleClass="border2">
		                                        <h:column>
		                                            <h:outputLabel value="#{cursos.grados.nombre}" styleClass="#{tareasProfesores.cursoSeleccionado(cursos)?'botonSeleccionadoVerde':'botonGrisClaro-Verde'} labelSinResaltar">
		                                                <f:ajax event="click" render=":formPrincipal @form :formListaTareas :formTareasFile" execute="@this" listener="#{tareasProfesores.escogerCurso(cursos)}"/>
		                                            </h:outputLabel>
		                                        </h:column>
		                                    </h:dataTable>
		                                </h:panelGroup>
		                            </h:form>
		                        </td>
		                        <td  class="colTablaNotasPrincipal-2 bordesHeader">
		                            <h:form id="formPrincipal" style="width: 100%;">
		                                <h:panelGroup id="contenedorAsignaturas">
		                                    <h:dataTable id="tablaRelacionAsignaturasPeriodos" value="#{tareasProfesores.dataListRelacionasignaturaperiodos}" var="relacionAsignaturaPeriodo"
		                                                 cellpadding="0" cellspacing="0" border="0" width="100%" columnClasses="colAsignaturas-1" styleClass="border2" style="margin-left: 5%;">
		                                        <h:column>
		                                            <h:outputLabel value="#{relacionAsignaturaPeriodo.relacionasignaturaperiodos.asignaturas.nombre}" styleClass="#{tareasProfesores.asignaturaSeleccionada(relacionAsignaturaPeriodo)?'botonSeleccionadoVerde':'botonGrisClaro-Verde'} labelSinResaltar">
		                                                <f:ajax event="click" execute="@this" render=":formListaTareas :formTareasFile @form" listener="#{tareasProfesores.escogerAsignatura(relacionAsignaturaPeriodo)}"
		                                                        onevent="despuesSeleccionarAsignatura"/>
		                                            </h:outputLabel>
		                                        </h:column>
		                                    </h:dataTable>
		                                </h:panelGroup>
		                            </h:form>
		                        </td>
		                        <td class="colTablaNotasPrincipal-4 bordesHeader">
		                            <h:form id="formTareasFile" enctype="multipart/form-data" acceptcharset="ISO-8859-1">
		                            	<meta http-equiv="Content-Type" content="text/html; ISO-8859-1" />
		                                <div id="backgroundCargando"/>
		                                <h:panelGroup layout="block" rendered="#{tareasProfesores.asignaturaSeleccionada}">
		                                    <table width="100%" cellpadding="0" cellspacing="0">
		                                        <tr>
		                                            <td class="colFormSubirTareas-1">
		                                                <h:outputLabel value="Nombre: " styleClass="labelResaltado marginIzquierdo"/>
		                                            </td>
		                                            <td>
		                                                <h:inputText escape="false" value="#{tareasProfesores.nombreTarea}" styleClass="inputTextTareas"
		                                                             autocomplete="false" >
		                                                </h:inputText>
		                                            </td>
		                                        </tr>
		                                        <tr>
		                                            <td class="colFormSubirTareas-1">
		                                                <h:outputLabel value="Fin: " styleClass="labelResaltado marginIzquierdo"/>
		                                            </td>
		                                            <td>
		                                                <p:calendar  value="#{tareasProfesores.tareas.fin}"  autocomplete="false"
		                                                             locale="es" pattern="dd/MM/yyyy"   styleClass="inputTextTareas" />
		                                            </td>
		                                        </tr>
		                                        <tr>
		                                            <td class="colFormSubirTareas-1">
		                                                <h:outputLabel value="Devolver: " styleClass="labelResaltado marginIzquierdo"/>
		                                            </td>
		                                            <td>
		                                                <h:selectBooleanCheckbox  value="#{tareasProfesores.tareas.online}"/>
		                                            </td>
		                                        </tr>
		                                        <tr>
		                                            <td class="colFormSubirTareas-1">
		                                                <h:outputLabel value="Descripción: " styleClass="labelResaltado marginIzquierdo"/>
		                                            </td>
		                                            <td>
		                                                <p:inputTextarea value="#{tareasProfesores.descripcionTarea}" styleClass="inputTextTareas">
		                                                </p:inputTextarea>
		                                            </td>
		                                        </tr>
		
		
		                                    </table>
		                                </h:panelGroup>
		                                <br/>
		                                <h:panelGroup rendered="#{tareasProfesores.asignaturaSeleccionada}">
		                                    <table width="100%" cellpadding="0" cellspacing="0">
		                                        <tr>
		                                            <td class="colFormSubirTareas-1">
		                                                &nbsp;
		                                            </td>
		                                            <td>
		                                                <p:growl id="messages" showDetail="true"/>
		                                                <p:fileUpload value="#{tareasProfesores.file}" mode="simple" styleClass="inputTextTareas"
		                                                              sizeLimit="3000" validatorMessage="El tamaño a subir es mayor a lo permitido"/>
		                                            </td>
		                                        </tr>
		                                        <tr>
		                                            <td class="colFormSubirTareas-1">
		                                                &nbsp;
		                                            </td>
		                                            <td>
		                                                <h:outputLabel>
		                                                    <p:commandButton  value="Cargar" type="submit" ajax="false" styleClass="botonPrimaFaces"
		                                                                      action="#{tareasProfesores.upload}" >
		                                                    </p:commandButton>
		                                                </h:outputLabel>
		                                            </td>
		                                        </tr>
		                                    </table>
		                                </h:panelGroup>
		                            </h:form>
		
		                        </td>
		                        <td class="colTablaNotasPrincipal-3">
		                            <h:form id="formListaTareas" style="width: 100%;">
		                                <h:dataTable id="tableListaTareas" value="#{tareasProfesores.dataListTareas}" var="tareas" columnClasses="colTablasNostaTareas-1 bordesHeader, colTablasNostaTareas-2 bordesHeader, colTablasNostaTareas-3 bordesHeader, ubicacionCeldaMitad colTablasNostaTareas-4"
		                                             width="100%" cellpadding="0" cellspacing="0" rowClasses="fila1 rowTareas, fila2 rowTareas">
		                                    <h:column>
		                                        <div class="marginIzquierdo">
		                                            <h:outputText value="#{tareas.nombre}" styleClass="labelSinResaltar"/>
		                                        </div>
		                                    </h:column>
		                                    <h:column>
		                                        <div class="marginIzquierdo">
		                                            <h:outputText value="#{tareas.descripcion}" styleClass="labelSinResaltar"/>
		                                        </div>
		                                    </h:column>
		                                    <h:column>
		                                        <div class="labelSinResaltar marginIzquierdo">
		                                            <center>
		                                                <h:outputText value="#{tareas.fecha}">
		                                                    <f:convertDateTime type="both"  pattern="dd/MM/yy" timeZone="America/Bogota"/>
		                                                </h:outputText>
		                                                <br/>
		                                                -
		                                                <br/>
		                                                <h:outputText value="#{tareas.fin}">
		                                                    <f:convertDateTime type="both" pattern="dd/MM/yy" timeZone="America/Bogota"/>
		                                                </h:outputText>
		                                            </center>
		                                        </div>
		                                    </h:column>
		                                    <h:column>
		                                        <center>
		                                            <h:graphicImage value="/resources/images/borrar.gif" style="cursor: pointer;"
		                                                            onclick="if(!confirm('Desea elimnar esta tarea?')) return false">
		                                                <p:ajax event="click" onstart="PF('statusDialog').show()" oncomplete="PF('statusDialog').hide()"  listener="#{tareasProfesores.eliminarTarea(tareas)}" update="@form"/>
		                                            </h:graphicImage>
		                                        </center>
		                                    </h:column>
		                                </h:dataTable>
		                            </h:form>
		                        </td>
		                    </tr>
		                </tbody>
		            </table>
		        </fieldset>
				<p:dialog widgetVar="statusDialog" modal="true" draggable="false"
					closable="false" resizable="false" showHeader="false">
					<p:graphicImage name="/imagenes/ajaxloadingbar.gif" />
				</p:dialog>
		</h:body>
    </f:view>
</html>
