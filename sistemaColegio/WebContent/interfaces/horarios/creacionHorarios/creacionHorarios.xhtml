<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <!--Css globales-->        
        <h:outputStylesheet name="default.css" library="css"/>
        <h:outputStylesheet name="cssLayout.css" library="css"/>
        <h:outputStylesheet name="cssJuan.css" library="universales/css"/>
        <h:outputStylesheet name="botones.css" library="universales/css"/>
        <h:outputStylesheet name="tablas.css" library="universales/css"/>
        <h:outputStylesheet name="letras.css" library="universales/css"/>
        <h:outputStylesheet name="fieldset.css" library="universales/css"/>

        <h:outputScript name="hoverIntent.js" library="menuPrincipal/js"/>
        <h:outputScript name="superfish.js" library="menuPrincipal/js"/>
        <h:outputStylesheet name="superfish.css" library="menuPrincipal/css"/>        


        <!--Css locales-->        
        <link href="css/creacionHorarios.css" rel="stylesheet" type="text/css" />

        <!--Js globales-->
        <h:outputScript name="validaciones.js" library="universales/js"/>

        <!--Js locales-->
        <script type="text/javascript"  src="js/creacionHorarios.js"/>


        <title>CONFIGURACION NOTAS ESTUDIANTES</title>
    </h:head>
    <h:body>
        <h:form>
            <div style="width: auto;" >
                <ui:include src="/resources/menuPrincipal/xhtml/superfish.xhtml"/>
            </div>
        </h:form>
        <br/>
        <h:panelGroup>
            <h:form id="formPrincipal" style="width: 1200px;">
                <fieldset class="fieldSetUniversal" style="width: 97%;  margin-left: auto; margin-right: auto;">
                    <div class="divTablaHeader" style="width: 100%;">
                        <table width="100%" cellpadding="0" cellspacing="0">
                            <thead>
                                <tr style="height: 30px;">
                                    <th class="colTablaNotasPrincipal-1 bordesHeader">
                                        Curso
                                    </th>
                                    <th class="bordesHeader">
                                        Asignatura
                                    </th>
                                </tr>
                            </thead>
                        </table>
                    </div>
                    <table width="100%" cellpadding="0" cellspacing="0" border="0">
                        <tbody>
                            <tr>
                                <td class="colTablaNotasPrincipal-1 bordesHeader">
                                    <h:panelGroup id="contenedorCursos">
                                        <h:dataTable id="tablaCursos" value="#{agregarHorarios.dataListCursos}" var="cursos" width="70%" cellpadding="0" cellspacing="0" border="0" styleClass="border2" 
                                                     columnClasses="colCursos-1">
                                            <h:column>
                                                <h:outputLabel value="#{cursos.grados.nombre}" styleClass="botonGrisClaro-Verde labelSinResaltar">
                                                    <f:ajax event="click" render=":formPrincipal:tablaRelacionAsignaturasPeriodos 
                                                    :formPrincipal:contenedorAsignaturas"
                                                    execute="@this" 
                                                    listener="#{agregarHorarios.escogerCurso(cursos)}" 
                                                    onevent="seleccionarCursos"/>
                                                </h:outputLabel>
                                            </h:column>
                                        </h:dataTable>
                                    </h:panelGroup>

                                </td>
                                <td class=" bordesHeader">
                                    <h:panelGroup id="contenedorAsignaturas">
                                        <p:dataTable id="tblAsignaturas" value="#{agregarHorarios.dataListBloquesHorariosCurso}" 
                                        	var="horarios">
                                        	<p:column headerText="&bnsp;" width="10%">
                                        		<h:outputText value="#{horarios[6]}">
                                        		</h:outputText>
                                        			-
                                        		<h:outputText value="#{horarios[7]}">
                                        		</h:outputText>
	                                        	</p:column>
											<p:column headerText="Lunes">
												<center>
													<p:selectOneMenu value="#{horarios[1]}" style="width:70%">
														<f:selectItem itemLabel="Sin Actividad" itemValue="#{null}"> </f:selectItem>
														<f:selectItems value="#{agregarHorarios.dataListMaterias}"
															var="materia" 
															itemLabel="#{materia.relacionasignaturaperiodos.asignaturas.nombre}"
															itemValue="#{materia.idrelacionprofesoresasignaturaperiodo}">
														</f:selectItems>
														<p:ajax listener="#{agregarHorarios.guardarHorarios}"
														onstart="PF('statusDialog').show()"
														oncomplete="PF('statusDialog').hide()"
														update=":messages"/>
													</p:selectOneMenu>
												</center>
											</p:column>
											<p:column headerText="Martes">
												<center>
													<p:selectOneMenu value="#{horarios[2]}" style="width:70%">
														<f:selectItem itemLabel="Sin Actividad" itemValue="#{null}"> </f:selectItem>
														<f:selectItems value="#{agregarHorarios.dataListMaterias}"
															var="materia" 
															itemLabel="#{materia.relacionasignaturaperiodos.asignaturas.nombre}"
															itemValue="#{materia.idrelacionprofesoresasignaturaperiodo}">
														</f:selectItems>
														<p:ajax listener="#{agregarHorarios.guardarHorarios}"
														onstart="PF('statusDialog').show()"
														oncomplete="PF('statusDialog').hide()"
														update=":messages"/>
													</p:selectOneMenu>
												</center>
											</p:column>
											<p:column headerText="Miercoles">
												<center>
													<p:selectOneMenu value="#{horarios[3]}" style="width:70%">
														<f:selectItem itemLabel="Sin Actividad" itemValue="#{null}"> </f:selectItem>
														<f:selectItems value="#{agregarHorarios.dataListMaterias}"
															var="materia" 
															itemLabel="#{materia.relacionasignaturaperiodos.asignaturas.nombre}"
															itemValue="#{materia.idrelacionprofesoresasignaturaperiodo}">
														</f:selectItems>
														<p:ajax listener="#{agregarHorarios.guardarHorarios}"
														onstart="PF('statusDialog').show()"
														oncomplete="PF('statusDialog').hide()"
														update=":messages"/>
													</p:selectOneMenu>
												</center>
											</p:column>
											<p:column headerText="Jueves">
												<center>
													<p:selectOneMenu value="#{horarios[4]}" style="width:70%">
														<f:selectItem itemLabel="Sin Actividad" itemValue="#{null}"> </f:selectItem>
														<f:selectItems value="#{agregarHorarios.dataListMaterias}"
															var="materia" 
															itemLabel="#{materia.relacionasignaturaperiodos.asignaturas.nombre}"
															itemValue="#{materia.idrelacionprofesoresasignaturaperiodo}">
														</f:selectItems>
														<p:ajax listener="#{agregarHorarios.guardarHorarios}"
														onstart="PF('statusDialog').show()"
														oncomplete="PF('statusDialog').hide()"
														update=":messages"/>
													</p:selectOneMenu>
												</center>
											</p:column>
											<p:column headerText="Viernes">
												<center>
													<p:selectOneMenu value="#{horarios[5]}" style="width:70%">
														<f:selectItem itemLabel="Sin Actividad" itemValue="#{null}"> </f:selectItem>
														<f:selectItems value="#{agregarHorarios.dataListMaterias}"
															var="materia" 
															itemLabel="#{materia.relacionasignaturaperiodos.asignaturas.nombre}"
															itemValue="#{materia.idrelacionprofesoresasignaturaperiodo}">
														</f:selectItems>
														<p:ajax listener="#{agregarHorarios.guardarHorarios}"
														onstart="PF('statusDialog').show()"
														oncomplete="PF('statusDialog').hide()"
														update=":messages"/>
													</p:selectOneMenu>
												</center>
											</p:column>
										</p:dataTable>
                                    </h:panelGroup>
                                </td>                               
                            </tr>
                        </tbody>
                    </table>
                </fieldset>
            </h:form>



            <div id="backgroundPopup" style="display: none; z-index: 0; width: 1400px;" onclick="escongerPopUP()"/>
            <br/>
            <p:growl id="messages" showDetail="true" widgetVar="messages" />
			<p:dialog widgetVar="statusDialog" modal="true" draggable="false"
				closable="false" resizable="false" showHeader="false">
				<p:graphicImage name="/imagenes/ajaxloadingbar.gif" />
			</p:dialog>
        </h:panelGroup>
    </h:body>
</html>
