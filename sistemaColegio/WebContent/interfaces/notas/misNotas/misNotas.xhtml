<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
<h:head>
	<!--Css globales-->
	<h:outputStylesheet name="default.css" library="css" />
	<h:outputStylesheet name="cssLayout.css" library="css" />
	<h:outputStylesheet name="cssJuan.css" library="universales/css" />
	<h:outputStylesheet name="botones.css" library="universales/css" />
	<h:outputStylesheet name="tablas.css" library="universales/css" />
	<h:outputStylesheet name="letras.css" library="universales/css" />
	<h:outputStylesheet name="fieldset.css" library="universales/css" />

	<h:outputScript name="hoverIntent.js" library="menuPrincipal/js" />
	<h:outputScript name="superfish.js" library="menuPrincipal/js" />
	<h:outputStylesheet name="superfish.css" library="menuPrincipal/css" />


	<!--Css locales-->
	<link href="css/misNotas.css" rel="stylesheet" type="text/css" />

	<!--Js globales-->
	<h:outputScript name="validaciones.js" library="universales/js" />
	<h:outputScript name="universaljs.js" library="universales/js" />

	<!--Js locales-->
	<script type="text/javascript" src="js/informes.js" />

	<title>NOTAS ESTUDIANTES</title>
</h:head>
<h:body>
	<h:form>
		<div style="width: auto;">
			<ui:include src="/resources/menuPrincipal/xhtml/superfish.xhtml" />
		</div>
	</h:form>
	<br />
	<h:form id="formPrincipal">
		<fieldset class="fieldSetUniversal"
			style="width: 98%; margin-left: auto; margin-right: auto;">
			<div class="divTablaHeader" style="width: 100%;">
				<table width="100%" cellpadding="0" cellspacing="0">
					<thead style="width: 100%">
						<tr style="height: 30px;">
							<th class="colTablaNotasPrincipal-3 bordesHeader">Periodos</th>
							<th class="colTablaNotasPrincipal-4 bordesHeader">
								<h:panelGroup
									id="headerEjemplo">
									<h:panelGroup
										rendered="#{notasEstudiantes.periodoSeleccionado!=null
									and notasEstudiantes.periodoSeleccionado.tipo==0}">
										<table width="100%" cellpadding="0" cellspacing="0" border="0"
											style="text-align: center;">
											<tr style="min-height: 30px; height: 30px;">
												<td
													class="colregistroMatriculas-1 ubicacionCeldaMitad bordesHeader">
													<center>Asignatura</center>
												</td>
												<td class="colregistroMatriculas-2">
													<table width="100%" cellpadding="0" cellspacing="0">
														<tr style="min-height: 30px;">
															<ui:repeat
																value="#{notasEstudiantes.dataListPeriodosEstudiantesHeader}"
																var="headerEjemplo">
																<td width="30%">
																	<table cellpadding="0" cellspacing="0" width="100%">
																		<tr>
																			<td
																				colspan="#{headerEjemplo.dataListDimensionesEstudiantes.size() + headerEjemplo.dataListRelacionrecuperacionregistromatriculas.size() +  1}"
																				class="bordesBottom"><h:outputLabel
																					value="#{headerEjemplo.periodos.nombre}" /></td>
																		</tr>
																		<tr>
																			<ui:repeat
																				value="#{headerEjemplo.dataListDimensionesEstudiantes}"
																				var="dimensionesEjemplo">
																				<td class="bordesHeader" width="17%"><h:outputLabel
																						value="#{dimensionesEjemplo.dimensiones.nombre}" />
																				</td>
																			</ui:repeat>
																			<ui:repeat
																				value="#{headerEjemplo.dataListRelacionrecuperacionregistromatriculas}"
																				var="recuperaciones">
																				<td class="bordesHeader" width="12%"><h:outputLabel
																						value="Rec #{recuperaciones.recuperaciones.numero}" />
																				</td>
																			</ui:repeat>
																			<td>Total</td>
																		</tr>
																	</table>
																</td>

															</ui:repeat>
														</tr>
													</table>
												</td>
											</tr>
										</table>
									</h:panelGroup>
									<h:panelGroup
										rendered="#{notasEstudiantes.periodoSeleccionado!=null
									and notasEstudiantes.periodoSeleccionado.tipo==1}">
										<table width="100%" cellpadding="0" cellspacing="0" border="0"
											style="text-align: center;">
											<tr style="min-height: 30px; height: 30px;">
												<td
													class="colregistroMatriculas-1 ubicacionCeldaMitad bordesHeader">
													<center>Asignatura</center>
												</td>
												<td class="colregistroMatriculas-2">
													<table width="100%" cellpadding="0" cellspacing="0">
														<tr style="min-height: 30px;">

															<td width="30%">
																<table cellpadding="5px" cellspacing="0" width="100%">
																	<tr>
																		<td
																			colspan="#{notasEstudiantes.dataListPeriodosEstudiantesFinal.size() + 1}"
																			class="bordesBottom"><h:outputLabel
																				value="Periodos" /></td>
																	</tr>
																	<tr>
																		<ui:repeat
																			value="#{notasEstudiantes.dataListPeriodosEstudiantesFinal}"
																			var="periodos">
																			<td class="bordesHeader" width="17%"><h:outputLabel
																					value="#{periodos.nombre}" /></td>
																		</ui:repeat>
																		<ui:repeat
																			value="#{notasEstudiantes.dataListRecuperaciones}"
																			var="recuperaciones">
																			<td class="bordesHeader" width="12%"><h:outputLabel
																					value="Rec #{recuperaciones.numero}" /></td>
																		</ui:repeat>


																		<td>Total</td>
																	</tr>
																</table>
															</td>
														</tr>
													</table>
												</td>
											</tr>
										</table>
									</h:panelGroup>

								</h:panelGroup></th>
						</tr>
					</thead>
				</table>
			</div>
			<table width="100%" cellpadding="0" cellspacing="0" border="0">
				<tbody style="width: 100%">
					<tr>
						<td
							class="colTablaNotasPrincipal-3 bordesHeader ubicacionCeldaArriba">
							<h:panelGroup id="contenedorPeriodos">
								<h:dataTable value="#{notasEstudiantes.dataListPeriodosEstudiantes}"
									var="periodo" styleClass="border2" width="100%" cellpadding="0"
									cellspacing="0">
									<h:column>
										<h:outputLabel value="#{periodo.nombre}"
											styleClass="botonPeriodos #{notasEstudiantes.periodoSeleccionado.idperiodos == periodo.idperiodos ?'botonSeleccionadoVerde botonPeriodoSeleccionado':'botonGrisClaro-Verde'} labelSinResaltar">
											<f:ajax event="click"
												render=":formPrincipal:contenedorInformes :formPrincipal:headerEjemplo"
												listener="#{notasEstudiantes.escogerPeriodoBoletin(periodo)}"
												onevent="seleccionarPeriodos" />
										</h:outputLabel>
									</h:column>
								</h:dataTable>
							</h:panelGroup>
						</td>
						<td
							class="colTablaNotasPrincipal-4 bordesHeader ubicacionCeldaArriba">
							<div id="backgroundCargando" style="z-index: 0; display: none;"
								onclick="escongerPopUP()" /> <h:panelGroup
								id="contenedorInformes" layout="block">
								<!-- Tabla de los informes por periodo -->
								<h:dataTable
									value="#{notasEstudiantes.dataListAsignturasEstudiantesE}"
									var="asignatura"
									columnClasses="colregistroMatriculas-1 bordesHeader, colregistroMatriculas-2"
									rowClasses="row1, row2" cellpadding="0" cellspacing="0"
									border="0" width="100%"
									style="display:#{notasEstudiantes.dataListAsignturasEstudiantes==null ?'none':'auto'}">
									<h:column>
										<div class="marginIzquierdo"> 
											<h:outputLabel value="#{asignatura.asignaturas.nombre}"
												style="text-transform: capitalize;">
													<f:converter converterId="minusculasjava" />
											</h:outputLabel>
										</div>
									</h:column>
									<h:column>
										<table width="100%" cellpadding="0" cellspacing="0" border="0">
											<tr>
												<ui:repeat value="#{asignatura.dataListPeriodosEstudiantes}"
													var="periodos">
													<td width="20%">

														<table width="100%" cellpadding="0" cellspacing="0"
															border="0">
															<tr>
																<ui:repeat
																	value="#{periodos.dataListDimensionesEstudiantes}"
																	var="dimensiones">
																	<td width="17%" class="bordesHeader"><h:outputLabel
																			value="#{dimensiones.valor}"
																			styleClass="marginIzquierdo">
																			<f:convertNumber locale="es_ES" />
																		</h:outputLabel></td>
																</ui:repeat>
																<ui:repeat
																	value="#{periodos.dataListRelacionrecuperacionregistromatriculas}"
																	var="recuperaciones">
																	<td width="12%" class="bordesHeader"><h:outputLabel
																			value="#{recuperaciones.valor}"
																			styleClass="marginIzquierdo">
																			<f:convertNumber locale="es_ES" />
																		</h:outputLabel></td>
																</ui:repeat>

																<td><h:outputLabel value="#{periodos.valor}"
																		styleClass="marginIzquierdo">
																		<f:convertNumber locale="es_ES" />
																	</h:outputLabel></td>
															</tr>
														</table>
													</td>
												</ui:repeat>
											</tr>
										</table>
									</h:column>
								</h:dataTable>
								<!-- Tabla de las observaciones finales -->
								<h:dataTable
									value="#{notasEstudiantes.dataListDefinitivasasignaturasperiodos}"
									var="definitiva"
									columnClasses="colregistroMatriculas-1 bordesHeader, colregistroMatriculas-2"
									rowClasses="row1, row2" cellpadding="0" cellspacing="0"
									border="0" width="100%">
									<h:column>
										<h:outputLabel value="#{definitiva.asignaturas.nombre}"
											style="text-transform: capitalize;"
											styleClass="marginIzquierdo">
											<f:converter converterId="minusculasjava" />
										</h:outputLabel>
									</h:column>
									<h:column>
										<table width="100%" cellpadding="0" cellspacing="0" border="0">
											<tr>
												<ui:repeat
													value="#{definitiva.dataListDefinitivasasignaturasperiodos}"
													var="periodos">

													<td width="17%" class="bordesHeader"><h:outputLabel
															value="#{periodos.valor}" styleClass="marginIzquierdo">
															<f:convertNumber locale="es_ES" />
														</h:outputLabel></td>
												</ui:repeat>
												<ui:repeat
													value="#{definitiva.dataListRelacionrecuperacionregistromatriculas}"
													var="recuperaciones">
													<td width="12%" class="bordesHeader"><h:outputLabel
															value="#{recuperaciones.valor}"
															styleClass="marginIzquierdo">
															<f:convertNumber locale="es_ES" />
														</h:outputLabel></td>
												</ui:repeat>
												<td><h:outputLabel value="#{definitiva.definitiva}"
														styleClass="marginIzquierdo"
														style="color:#{65>definitiva.definitiva?'red':''};">
														<f:convertNumber locale="es_ES" />
													</h:outputLabel></td>
											</tr>
										</table>
									</h:column>
								</h:dataTable>
							</h:panelGroup>
						</td>
					</tr>
				</tbody>
			</table>
		</fieldset>
	</h:form>
	<p:dialog widgetVar="statusDialog" modal="true" draggable="false"
		closable="false" resizable="false" showHeader="false">
		<p:graphicImage name="/imagenes/ajax-loader.gif" />
	</p:dialog>

</h:body>
</html>
